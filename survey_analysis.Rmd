---
title: "SBL Survey Analysis"
output:
  html_document:
    toc: yes
---

------------------------------------------------------------------------

# Supplementary Material Chapter 4

**Author:** Michael S. Feurstein\
**Created:** 15 May 2025\
**Last compiled:** `r format(Sys.time(), '%d %B %Y')`

------------------------------------------------------------------------

## About this notebook

This notebook is a supplementary material for Chapter "Perceived Usability Survey" used for replication of results. Data preparation steps have been done before. All further details on survey design, methodology and analysis procedure can be found in the corresponding Chapter of thesis.

------------------------------------------------------------------------

### Libraries

```{r message=FALSE, warning=FALSE}
library(dplyr)
if(!require(likert)){install.packages("likert")}
library(likert)
if(!require(svglite)){install.packages("svglite")}
library(svglite)
library(ggplot2)
library(ggtext)
```

### Load Data

File: ***"data_survey_prepared.csv"*** - contains calculated sus-score.
```{r}
# read from prepared csv
df <- read.csv("data-survey-sus_prepared.csv")
```

File: ***participant_profiles_anon_prepared.csv*** - contains all anonymized data on participants and their profile (self assessed role: author, user, researcher, other and meta data on activity in field: no of videos, no of papers, no of courses etc.)
```{r}
# read from prepared csv
profiledata <- read.csv("data-survey-profiles_prepared.csv")
```

File: ***data-post-hoc_prepared.csv*** - contains post-hoc questions
```{r}
# read from prepared csv
posthocdata <- read.csv("data-post-hoc_prepared.csv")
posthocdata <- head(posthocdata,-1)
```



## Descriptive Statistics

### Participants

#### Profile

```{r}
# participant profiles
profileSums <- colSums(profiledata == "Yes")
profile_columns = c("Profile","Frequency")
df_p = data.frame(matrix(nrow = 0, ncol = length(profile_columns))) 
colnames(df_p) = profile_columns
df_p[nrow(df_p) + 1,] = c("Author",profileSums["author"])
df_p[nrow(df_p) + 1,] = c("User",profileSums["user"])
df_p[nrow(df_p) + 1,] = c("Researcher",profileSums["researcher"])
df_p[nrow(df_p) + 1,] = c("Other",3) # manual count for profile author:no user:no researcher:no

# convert frequency column into numeric format
df_p$Frequency = as.numeric(as.character(df_p$Frequency))

# order dataframe ascending
# this way it's displayed descending in horizontal barplot
df_p <- df_p[order(df_p$Frequency),] 

# plot barplot
counts <- table(df_p$Frequency)
par(mar=c(3, 7, 3, 3))
profile_plot <- barplot(height=df_p$Frequency, names=df_p$Profile, main="Participant Profiles", horiz=T,las=1,xlim=c(0,50),width = c(2,2,2,2,2))
text(x=df_p$Frequency, profile_plot, labels = paste(df_p$Frequency), pos=4, offset=0.3, xpd=T)
```

#### Profile Details

```{r}
# Author 
## Years active
## How many years have you been authoring / producing educational videos, lecture
## recordings or other video-based learning content?
profiledata$authorHOWMANYYEARS <- as.numeric(as.character(profiledata$authorHOWMANYYEARS))
summary(na.omit(profiledata$authorHOWMANYYEARS))

## Videos created 
## How many educational videos, lecture recordings or other video-based learning
## content have you produced until now?
profiledata$authorHOWMANYVIDEOS <- as.numeric(as.character(profiledata$authorHOWMANYVIDEOS))
summary(na.omit(profiledata$authorHOWMANYVIDEOS))

# User 
## Years active
## How many years have you been using video-based learning content?
profiledata$userHOWMANYYEARS <- as.numeric(as.character(profiledata$userHOWMANYYEARS))
summary(na.omit(profiledata$userHOWMANYYEARS))

## Courses
## How many courses have you tought with the support of video-based learning con-
## tent? Please also count recurring courses, which possibly took place each semester.
profiledata$userHOWMANYCOURSES <- as.numeric(as.character(profiledata$userHOWMANYCOURSES))
summary(na.omit(profiledata$userHOWMANYCOURSES))

# Researcher
## Years researching
## How many years have you conducted research in the field of video-based learning
## / technology enhanced learning / educational technology?
profiledata$researchHOWMANYYEARS <- as.numeric(as.character(profiledata$researchHOWMANYYEARS))
summary(na.omit(profiledata$researchHOWMANYYEARS))

## Papers published
## How many papers have you published in the field of video-based learning? 
profiledata$researchHOWMANYPUB <- as.numeric(as.character(profiledata$researchHOWMANYPUB))
summary(na.omit(profiledata$researchHOWMANYPUB))
```



### Dependent Variables

#### Usability (SUS Score)

**Boxplot:** Visual inspection of data, using a boxplot.
```{r}
par(mar=c(5, 5, 3, 2))
boxplot(sus ~ notation, data = df, main = "Usability (System Usability Scale)", xlab = "Notation", ylab = "SUS score", names = c("CNL","KV","SC"))
```

**Summary:** For reporting of mean (min, q1, mdn, q2, max) and sd:
```{r}
df %>%
  group_by(notation) %>%
  summarize(mean = mean(sus), sd = sd(sus), min = min(sus), max = max(sus), med = median(sus), q1 = quantile(sus, 0.25), q3 = quantile(sus, 0.75))
```

**Mean Difference:** For reporting of unstandardized mean difference:
```{r}
##### mean difference ####
# values
sus_cnl <- mean(df$sus[df$notation == "cnl"])
sus_kv <- mean(df$sus[df$notation == "kv"])
sus_sc <- mean(df$sus[df$notation == "sc"])
# difference between cnl kv: cnl-kv
sus_diffcnlkv <- sus_cnl-sus_kv
# avergae of nl kv
sus_avgcnlkv <- (sus_cnl+sus_kv)/2
sus_ratiocnlkv <- sus_diffcnlkv/sus_avgcnlkv
# percentage
sus_percent_diff_cnlkv <- abs(sus_ratiocnlkv*100)
print(c("CNL/KV mean difference in percentage: ", sus_percent_diff_cnlkv))

# difference between sc kv: sc-kv
sus_diffsckv <- sus_sc-sus_kv
# avergae of nl kv
sus_avgsckv <- (sus_sc+sus_kv)/2
sus_ratiosckv <- sus_diffsckv/sus_avgsckv
# percentage
sus_percent_diff_sckv <- abs(sus_ratiosckv*100)
print(c("SC/KV mean difference in percentage: ", sus_percent_diff_sckv))
```

### Post-hoc Questions

The following questions were asked after assessing the perceived usability for all three notations.

Preparing for likert plotting
```{r}
# get the sums of each column with likert levels
strong_disagree <- colSums(posthocdata == "1")
strong_disagree <- as.data.frame(strong_disagree)

disagree <- colSums(posthocdata == "2")
disagree <- as.data.frame(disagree)

neutral <- colSums(posthocdata == "3")
neutral <- as.data.frame(neutral)

agree <- colSums(posthocdata == "4")
agree <- as.data.frame(agree)

strong_agree <- colSums(posthocdata == "5")
strong_agree <- as.data.frame(strong_agree)
```

#### Questions 1-4

```{r, fig.width=7,fig.height=5}
# setup 
col_titles = c("Item","Strong Disagree","Disagree","Neutral","Agree","Strong Agree")
df_posthoc_all = data.frame(matrix(nrow = 0, ncol = length(col_titles))) 
colnames(df_posthoc_all) = col_titles

# fill
df_posthoc_all[1, ] <- c("Q1",strong_disagree[5,],disagree[5,],neutral[5,],agree[5,],strong_agree[5,])
df_posthoc_all[2, ] <- c("Q2",strong_disagree[6,],disagree[6,],neutral[6,],agree[6,],strong_agree[6,])
df_posthoc_all[3, ] <- c("Q3",strong_disagree[7,],disagree[7,],neutral[7,],agree[7,],strong_agree[7,])
df_posthoc_all[4, ] <- c("Q4",strong_disagree[8,],disagree[8,],neutral[8,],agree[8,],strong_agree[8,])

# convert to numeric
i <- c(2:6)  
df_posthoc_all[, i] <- apply(df_posthoc_all[, i], 2, function(x) as.numeric(as.character(x)))
#sapply(df_posthoc_all, mode)

# plot
title <- "Post-hoc Questions"
q1_plot <- plot(likert(summary = df_posthoc_all), group.order = c("Q1", "Q2", "Q3", "Q4")) +
  labs(title = title, y = "Percentage", caption = "<b>Q1 Efficiency:</b> Do you agree with the statement that a text-based approach could be more efficient?<br><b>Q2 Effectiveness:</b> Do you agree with the statement that a text-based approach could be more effective?<br><b>Q3 Textual notation as a first step:</b> Could you imagine using a textual notation as a starting point to sketch out<br>the main structure of a learning module in order to continue editing in a graphical user interface (GUI)?<br><b>Q4 Textual notation combined with GUI:</b> Could you imagine using a textual notation in combination with<br>an editing environment in a graphical user interface (GUI), allowing you to refine and switch between<br>textual notation and GUI representation?") +
  theme(plot.caption = element_markdown())
  
q1_plot

#save in variable image to export to svg
image=q1_plot
#save
ggsave(file="plots/posthoc_questions.svg", plot=image, width=7, height=5)
```

## Results and Hypothesis Tests

### Tests of Normality

#### Usability (SUS Score)

Two types of visual inspections (histograms and qq-plots) and two types of statistical tests (Shapiro-Wilk and Skewness-Test).

**Result:** Data is not normal. Boxcox transformation is used.

```{r}
# boxcox transform sus
df$sus.boxcox = (df$sus^3.2-1)/3.2
```

